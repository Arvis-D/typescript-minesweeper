!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.notify=function(t,e){void 0===e&&(e=null),this.participants[t]?this.participants[t].forEach((function(i){i.listen(t,e)})):console.log('Error: nobody is listening to "'+t+'" event')},t.addParticipant=function(t,e){this.participants[t]=this.participants[t]||[],this.participants[t].push(e)},t.participants={},t}();e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(t){this.pos=t,this.number=0,this.condition="closed",this.hasMine=!1,this.neighbors=[],this.setDom()}return t.prototype.showTiles=function(){var t=this.condition,e=this.number,i=this.neighbors;"closed"===t&&(this.showTile(),0===e&&i.forEach((function(t,e){setTimeout((function(){t.showTiles()}),50)})))},t.prototype.showTile=function(){var e=this.dom,i=this.number,n=this.hasMine;this.condition="opened",e.classList.replace("closed","opened"),e.style.color=t.colors[i],e.innerHTML=n||0===i?"":i.toString(),n&&e.classList.add("mine")},t.prototype.handleMouseUp=function(e){0===e.button&&t.active&&(t.atLeastOneOpened?this.hasMine&&"flag"!==this.condition?n.default.notify("mine stepped",this.pos):(n.default.notify("tile opened"),this.showTiles()):(t.atLeastOneOpened=!0,n.default.notify("game started",this.pos)))},t.prototype.handleContextMenu=function(e){t.active&&(e.preventDefault(),this.toggleFlag())},t.prototype.handleMouseDown=function(e){"closed"===this.condition&&0===e.button&&t.active&&n.default.notify("tile mousedown")},t.prototype.toggleFlag=function(){"opened"!==this.condition&&(this.dom.classList.toggle("flag"),"flag"===this.condition?(this.condition="closed",n.default.notify("flag removed")):(this.condition="flag",n.default.notify("flag posted")))},t.prototype.setDom=function(){var t=this,e=this.condition;this.dom=document.createElement("button"),this.dom.classList.add("tile",e),this.dom.addEventListener("mouseup",(function(e){t.handleMouseUp(e)})),this.dom.addEventListener("contextmenu",(function(e){t.handleContextMenu(e)})),this.dom.addEventListener("mousedown",(function(e){t.handleMouseDown(e)}))},t.prototype.setStyle=function(t){var e=this.dom;e.style.height=t+"px",e.style.width=t+"px",e.style.fontSize=t-3+"px"},t.active=!0,t.atLeastOneOpened=!1,t.colors={0:"white",1:"blue",2:"green",3:"red",4:"purple",5:"brown",6:"darkcyan",7:"black",8:"grey"},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i(3).default.create(document.querySelector("#minesweeper"))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(5),s=i(6),r=i(7),a=i(8),d=i(9),u=i(10),c=function(){function t(){}return t.create=function(t){var e=new u.default,i=e.values,c=i.xWidth,l=i.yWidth,h=i.probability,f=i.tileSize;return new n.default(t,new s.default(new a.default,new r.default,new d.default,e),new o.default(c,l,h,f))},t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(1),s=function(){function t(t,e,i){this.dom=t,this.header=e,this.minefield=i,this.dom.appendChild(this.header.dom),this.dom.appendChild(this.minefield.dom),n.default.addParticipant("game started",this),n.default.addParticipant("reset",this),n.default.addParticipant("mine stepped",this),n.default.addParticipant("victory",this),e.counter.setMinesLeft(i.getMineCount()),this.resetSettings()}return t.prototype.listen=function(t,e){switch(t){case"game started":this.startGame(e);break;case"reset":this.reset();break;case"mine stepped":this.defeat(e);break;case"victory":this.victory()}},t.prototype.startGame=function(t){var e=this.minefield,i=this.header;e.addMines(t),e.addNumbers(),e.tiles[t].showTiles(),i.reset.changeBackground("normal"),i.timer.startCounting()},t.prototype.reset=function(){var t=this.minefield,e=this.header;this.resetSettings(),t.removeTilesFromDom(),t.createTiles(),t.addNeighbors(),t.showTiles(),e.timer.stopCounting(),e.timer.reset(),e.counter.setMinesLeft(t.getMineCount()),e.reset.changeBackground("normal"),o.default.active=!0},t.prototype.resetSettings=function(){var t=this.minefield,e=this.header.settings.values;t.tileSize=e.tileSize,t.xWidth=e.xWidth,t.yWidth=e.yWidth,t.mineProbability=e.probability,t.setStyle()},t.prototype.victory=function(){o.default.active=!1,this.header.reset.changeBackground("victory"),this.header.timer.stopCounting()},t.prototype.defeat=function(t){var e=this.minefield,i=this.header;i.reset.changeBackground("dead"),i.timer.stopCounting(),e.showAllMines(),e.tiles[t].dom.style.backgroundColor="red",o.default.active=!1},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i(0),s=function(){function t(t,e,i,n){this.xWidth=t,this.yWidth=e,this.mineProbability=i,this.tileSize=n,this.setDom(),this.setStyle(),this.createTiles(),this.addNeighbors(),this.showTiles(),o.default.addParticipant("counter zero",this)}return t.prototype.createTiles=function(){this.tiles={},n.default.atLeastOneOpened=!1;for(var t=0;t<this.yWidth;t++)for(var e=0;e<this.xWidth;e++){var i=e+"|"+t;this.tiles[i]=new n.default(i),this.tiles[i].setStyle(this.tileSize)}},t.prototype.addMines=function(t){var e=this.tiles,i=this.xWidth,n=this.yWidth,o=[];o.push(t),e[t].neighbors.forEach((function(t){o.push(t.pos)}));for(var s=this.getMineCount(),r=0;r!==s;){var a=Math.round(Math.random()*(i-1))+"|"+Math.round(Math.random()*(n-1));e[a].hasMine||o.includes(a)||(e[a].hasMine=!0,r++)}},t.prototype.addNeighbors=function(){var t=this.tiles,e=this.xWidth,i=this.yWidth;Object.keys(t).forEach((function(n){for(var o=n.split("|").map((function(t){return parseInt(t)})),s=o[0],r=o[1],a=t[n],d=-1;d<=1;d++)for(var u=-1;u<=1;u++){var c=s+d,l=r+u;c<0||l<0||c>=e||l>=i||c===s&&l===r||a.neighbors.push(t[c+"|"+l])}}))},t.prototype.addNumbers=function(){var t=this.tiles;Object.keys(t).forEach((function(e){var i=t[e],n=0;i.neighbors.forEach((function(t){t.hasMine&&n++})),i.number=n}))},t.prototype.showTiles=function(){var t=this;Object.values(this.tiles).forEach((function(e){t.dom.appendChild(e.dom)}))},t.prototype.setStyle=function(){var t=this.dom,e=this.xWidth,i=this.yWidth,n=this.tileSize;t.style.width=n*e+"px",t.style.height=n*i+"px"},t.prototype.setDom=function(){this.dom=document.createElement("div"),this.dom.setAttribute("id","minefield")},t.prototype.removeTilesFromDom=function(){for(;this.dom.lastChild;)this.dom.removeChild(this.dom.lastChild)},t.prototype.getMineCount=function(){return Math.round(this.xWidth*this.yWidth*this.mineProbability)},t.prototype.showAllMines=function(){Object.values(this.tiles).forEach((function(t){t.hasMine&&"flag"!==t.condition?(t.dom.classList.add("mine"),t.showTile()):t.hasMine||"flag"!==t.condition||(t.dom.classList.remove("flag"),t.showTile())}))},t.prototype.listen=function(t,e){this.checkVictory()},t.prototype.checkVictory=function(){Object.values(this.tiles).filter((function(t){return t.hasMine&&"flag"!==t.condition})).length||o.default.notify("victory")},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i,n){this.counter=t,this.reset=e,this.timer=i,this.settings=n,this.createDom()}return t.prototype.createDom=function(){this.dom=document.createElement("div"),this.dom.setAttribute("id","header"),this.dom.appendChild(this.settings.dom),this.dom.appendChild(this.counter.dom),this.dom.appendChild(this.reset.dom),this.dom.appendChild(this.timer.dom)},t}();e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(){this.smileys={victory:"victory.png",click:"click.svg",normal:"normal.svg",dead:"dead.png"},this.createDom(),n.default.addParticipant("tile mousedown",this),n.default.addParticipant("tile opened",this)}return t.prototype.createDom=function(){var t=this;this.dom=document.createElement("button"),this.changeBackground("normal"),this.dom.classList.add("btn","btn-round"),this.dom.setAttribute("id","reset"),this.dom.addEventListener("click",(function(){t.reset()}))},t.prototype.reset=function(){n.default.notify("reset")},t.prototype.changeBackground=function(t){this.dom.style.backgroundImage="url(./style/img/"+this.smileys[t]+")"},t.prototype.listen=function(t,e){var i=this;switch(t){case"tile mousedown":this.changeBackground("click");break;case"tile opened":setTimeout((function(){i.changeBackground("normal")}),100)}},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(){this.mminesLeft=0,this.createDom()}return t.prototype.createDom=function(){this.dom=document.createElement("div"),this.dom.classList.add("counter"),this.dom.setAttribute("id","mine-counter"),this.dom.innerHTML=this.getInnerHTML(),n.default.addParticipant("flag posted",this),n.default.addParticipant("flag removed",this)},t.prototype.getInnerHTML=function(){return'\n        <h5>Mines left:</h5>\n        <div class="counter-number">'+this.mminesLeft+"</div>"},t.prototype.setMinesLeft=function(t){this.mminesLeft=t,this.dom.innerHTML=this.getInnerHTML(),0===t&&n.default.notify("counter zero")},t.prototype.listen=function(t,e){switch(t){case"flag posted":this.setMinesLeft(this.mminesLeft-1);break;case"flag removed":this.setMinesLeft(this.mminesLeft+1)}},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.ticks=0,this.tickTimeLength=1e3,this.intervalId=null,this.createDom()}return t.prototype.createDom=function(){this.dom=document.createElement("div"),this.dom.classList.add("counter"),this.dom.setAttribute("id","time-counter"),this.dom.innerHTML=this.getInnerHTML()},t.prototype.count=function(){var t=this,e=this.tickTimeLength,i=Date.now();return setInterval((function(){Date.now()>i+e*t.ticks&&(t.ticks++,t.dom.innerHTML=t.getInnerHTML())}),1)},t.prototype.getInnerHTML=function(){return'\n        <h5>Time elapsed:</h5>\n        <div class="counter-number">'+this.ticks+"</div>"},t.prototype.startCounting=function(){null===this.intervalId?this.intervalId=this.count():console.log("Timer already counting!")},t.prototype.stopCounting=function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},t.prototype.reset=function(){this.ticks=0,this.dom.innerHTML=this.getInnerHTML()},t}();e.default=n},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=i(11),a=i(0),d=function(t){function e(){var e=t.call(this,document.querySelector(".modal"))||this;return e.values={xWidth:30,yWidth:16,probability:.208,tileSize:30},e.createDom(),e.input=e.modal.querySelectorAll("input"),e.updateInput(),e}return o(e,t),e.prototype.createDom=function(){var t=this;this.dom=document.createElement("button"),this.dom.innerHTML='<span class="mi mi-settings"></span>',this.dom.classList.add("btn","btn-round"),this.dom.setAttribute("id","settings"),this.dom.addEventListener("click",(function(){t.openModal()})),this.save=this.modal.querySelector(".save"),this.save.addEventListener("click",(function(){t.saveSettings()}))},e.prototype.saveSettings=function(){var t={xWidth:parseInt(this.input[0].value),yWidth:parseInt(this.input[1].value),probability:parseFloat(this.input[2].value)/100,tileSize:parseInt(this.input[3].value)};this.validate(t)&&(this.values=s({},t),a.default.notify("reset"))},e.prototype.updateInput=function(){var t=this;this.input.forEach((function(e,i){e.value=Object.values(t.values)[i].toString()})),this.input[2].value=100*this.values.probability},e.prototype.validate=function(t){var e=t.xWidth,i=t.yWidth,n=t.probability,o=t.tileSize;return console.log(t),Object.values(t).filter((function(t){return isNaN(t)})).length?(alert("incorrect values"),!1):e<5||i<5?(alert("minefield must be at least 5x5"),!1):Math.round(n*e*i)>=Math.round(e*i-9)||n<0?(alert("too many or too few mines"),!1):!(o<10||o>100)||(alert("tile size incorrect"),!1)},e}(r.default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.modal=t,this.modal.addEventListener("click",(function(t){e.closeModal(t)})),this.close=this.modal.querySelector(".modal-close"),this.close.addEventListener("click",(function(t){e.closeModal(t)}))}return t.prototype.openModal=function(){this.modal.classList.replace("closed","opened")},t.prototype.closeModal=function(t){t.target!==this.modal&&t.target!==this.close||this.modal.classList.replace("opened","closed")},t}();e.default=n}]);